# Telegram Mini App для заказа трубной продукции

## Описание
Это Telegram Mini App для автоматизации заказов трубной продукции. Приложение предоставляет мобильный интерфейс для фильтрации продукции, управления корзиной, расчета цен с учетом скидок и оформления заказов. Backend реализован на C# (ASP.NET Core), frontend использует HTML, JavaScript, CSS, Telegram Web App API.

## Требования
- Docker и Docker Compose.
- Telegram-бот для тестирования Mini App.
- Localtunnel для туннелирования


# Установка
В CMD от имени администратора: npm install -g localtunnel


## Запуск
1. dotnet run
2. lt --port 5000 --subdomain tg-miniapp-hack
2.1. Если выданный URL отличается от https://tg-miniapp-hack.loca.lt, то в файле index-scripts.js заменить https://tg-miniapp-hack.loca.lt на новый.
3. Создать телеграм бота через @BotFather.
3.1. В диалоге с @BotFather написать /mybots -> Выбрать своего нового бота -> Bot Settings -> Configure Mini App -> Enable ->  Отправить ссылку из пункта 2.
4. Заходим в приложение (Переходим по ссылке из пукта 2), будет страница с предупреждением о посещении небезопасного сайта и требованием пароля для перехода на него (Это связано с Localtunnel).
4.1. Чтоб получить пароль для страницы из пункта 4, необходимо в CMD выполнить команду: curl https://loca.lt/mytunnelpassword
4.1.1. После выполнения команды из пункта 4.1 необходимо взять IP-адресс из поля Content и вставить его на страницу.




Функционал

Фильтрация: Поиск по складу, типу трубы, диаметру, толщине стенки, ГОСТ, марке стали.
Корзина: Добавление товаров с указанием количества в тоннах или метрах, с учетом шага длины/веса.
Скидки: Автоматический расчет цен на основе порогов (PriceT, PriceT1, PriceT2, PriceM, PriceM1, PriceM2).
Оформление заказа: Ввод имени, фамилии, ИНН, телефона, email.
Обновление данных: API /api/update для синхронизации цен и остатков (полные и дельта-обновления).

Ссылка на макет из Figma:
https://www.figma.com/design/r8rnbQu2o7MFkaGkh11JgG/Untitled?node-id=3-973
